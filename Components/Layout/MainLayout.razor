@inherits LayoutComponentBase
@inject NavigationManager navigationManager

<div style="background: linear-gradient(to right, #1A2E5B, #0C3E9F); min-height: 100vh;">
    <main style="display: flex; flex-direction: column; justify-content: space-between; min-height: 100vh;">
        <!-- Header con navegación -->
        <header style="background-color: #1A2E5B; padding: 10px; display: flex; justify-content: flex-end; align-items: center;">
            <button @onclick="NavigateToSomePage" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer;">
                Usuario: @userName
            </button>
        </header>

        <!-- Contenido de la página -->
        <article style="flex-grow: 1; display: flex; justify-content: center; align-items: center; padding: 20px;">
            @Body
        </article>

        <!-- Footer -->
        <footer style="text-align: center; color: white; padding: 10px; background-color: #1A2E5B;">
            <p>© 2024 Prestamax SRL</p>
        </footer>
    </main>
</div>

<!-- Error UI para manejo de errores en Blazor -->
<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code {
    [CascadingParameter]
    private Task<AuthenticationState> AuthenticationState { get; set; }

    private string userName;

    protected override async Task OnParametersSetAsync()
    {
        var authState = await AuthenticationState;
        var user = authState.User;

        if (user.Identity.IsAuthenticated)
        {
            userName = user.Identity.Name; // Obtiene el nombre del usuario autenticado
        }
        else
        {
            userName = ""; // Usuario no autenticado
        }
    }

    public void NavigateToSomePage()
    {
        // Cambiar la ruta a una página deseada
        navigationManager.NavigateTo("/menu");
    }
}